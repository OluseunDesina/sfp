<div class="container-fluid">
  <div class="row">
    <div class="mx-auto col-8">
      <div class="card">
        <div class="card-header">
          <h5>{{title | titlecase}}</h5>
        </div>
        <div class="card-body">

          <div id="errorDiv" *ngIf="errorMessage" class="mb-4 text-center">
            <small>{{ errorMessage }}</small>
          </div>

          <mat-vertical-stepper [linear]="true" #stepper>
            <mat-step [stepControl]="contactForm" errorMessage="Conatct info is required." state="contact">
              <form [formGroup]="contactForm" class="row theme-form mega-form">
                <ng-template matStepLabel>
                  <h6 class="col-12">Contact Information</h6>
                </ng-template>
                <!-- firstname -->
                <div class="col-md-6">
                  <div class="form-group">
                    <label class="col-form-label">First Name</label>
                    <input formControlName="first_name" class="form-control" type="text" placeholder="your Name"
                      required>
                    <div
                      *ngIf="contactForm.controls.first_name.touched && contactForm.controls.first_name.errors?.required"
                      class="text text-danger">
                      First Name is required.
                    </div>
                    <div
                      *ngIf="contactForm.controls.first_name.touched && contactForm.controls.first_name.errors?.pattern"
                      class="text text-danger">
                      First Name must be an alphabates.
                    </div>
                  </div>
                </div>

                <!-- lastname -->
                <div class="col-md-6">
                  <div class="form-group">
                    <label class="col-form-label">Last Name</label>
                    <input formControlName="last_name" class="form-control" type="text" placeholder="your Name">
                    <div
                      *ngIf="contactForm.controls.last_name.touched && contactForm.controls.last_name.errors?.required"
                      class="text text-danger">
                      Last Name is required.
                    </div>
                    <div
                      *ngIf="contactForm.controls.last_name.touched && contactForm.controls.last_name.errors?.pattern"
                      class="text text-danger">
                      Last Name must be an alphabates.
                    </div>
                  </div>
                </div>

                <!-- Email -->
                <div class="col-md-6">
                  <div class="form-group">
                    <label class="col-form-label">Email Address</label>
                    <input formControlName="email" class="form-control" type="email" placeholder="Enter email">
                    <div *ngIf="contactForm.controls.email.touched && contactForm.controls.email.errors?.required"
                      class="text text-danger">
                      Email is required.
                    </div>
                    <div *ngIf="contactForm.controls.email.touched && contactForm.controls.email.errors?.pattern"
                      class="text text-danger">
                      Email must be Valid.
                    </div>
                  </div>
                </div>

                <div class="col-md-6">
                  <div class="form-group">
                    <label class="col-form-label">Username</label>
                    <input formControlName="username" class="form-control" type="text" placeholder="your username"
                      required>
                    <div
                      *ngIf="contactForm.controls.username.touched && contactForm.controls.username.errors?.required"
                      class="text text-danger">
                      Username is required.
                    </div>
                    <div
                      *ngIf="contactForm.controls.first_name.touched && contactForm.controls.first_name.errors?.pattern"
                      class="text text-danger">
                      First Name must be an alphabates.
                    </div>
                  </div>
                </div>

                <!-- Phone -->
                <div class="col-md-6">
                  <div class="form-group">
                    <label class="col-12">Contact Number</label>
                    <ngx-intl-tel-input class="col-12" [cssClass]="'form-control'"
                      [preferredCountries]="[CountryISO.UnitedStates, CountryISO.UnitedKingdom]"
                      [enableAutoCountrySelect]="false" [enablePlaceholder]="true" [searchCountryFlag]="true"
                      [searchCountryField]="[SearchCountryField.Iso2, SearchCountryField.Name]"
                      [selectFirstCountry]="false" [selectedCountryISO]="CountryISO.Nigeria" [maxLength]="11"
                      [phoneValidation]="true" name="phone" (input)="setPhone($event)">
                    </ngx-intl-tel-input>
                  </div>
                </div>
                <div class="col-md-12">
                  <button class="btn btn-primary" (click)="validateForm(contactForm)" mat-button
                    matStepperNext>Next</button>
                </div>
              </form>
            </mat-step>
            <mat-step [stepControl]="companyForm" errorMessage="Company info is required." state="company">
              <form [formGroup]="companyForm" class="row theme-form mega-form">
                <ng-template matStepLabel>
                  <div class="col-12">
                    <h6>Vendor Information</h6>
                  </div>
                </ng-template>

                <!-- Company -->
                <!-- <ng-container *ngIf="isSid">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label class="col-form-label">Company Name</label>
                      <select formControlName="company" class="form-control digits" placeholder="Department">
                        <option value=null>Please select a company</option>
                        <option *ngFor="let company of companyList" [value]="company.id">
                          {{company.name}}
                        </option>
                      </select>
                      <div *ngIf="companyForm.controls.company.touched && companyForm.controls.company.errors?.required"
                        class="text text-danger">
                        Company is required.
                      </div>
                    </div>
                  </div>
                </ng-container> -->

                <!-- Name -->
                <div class="col-md-12">
                  <div class="form-group">
                    <label class="col-form-label">Business Name</label>
                    <input formControlName="bussiness_name" class="form-control" type="text" placeholder="Company Name">
                    <div
                      *ngIf="companyForm.controls.bussiness_name.touched && companyForm.controls.bussiness_name.errors?.required"
                      class="text text-danger">
                      Name is required.
                    </div>
                    <div
                      *ngIf="companyForm.controls.bussiness_name.touched && companyForm.controls.bussiness_name.errors?.pattern"
                      class="text text-danger">
                      Company name can only be alphabets.
                    </div>
                  </div>
                </div>

                <!-- description -->
                <div class="col-md-12">
                  <div class="form-group">
                    <label class="col-form-label">Description</label>
                    <textarea formControlName="description" class="form-control" placeholder="Website">

                    </textarea>
                    <div
                      *ngIf="companyForm.controls.description.touched && companyForm.controls.description.errors?.required"
                      class="text text-danger">
                      Company description is required.
                    </div>
                  </div>
                </div>

                <div class="col-md-12">
                  <button mat-button matStepperPrevious>Back</button>
                  <button class="btn btn-primary" (click)="validateForm(companyForm)" mat-button
                    matStepperNext>Next</button>
                </div>
              </form>
            </mat-step>
            <mat-step [stepControl]="billingForm" errorMessage="Billing info is required." state="billing">
              <form [formGroup]="billingForm" class="mt-4 row theme-form mega-form">
                <ng-template matStepLabel>
                  <div class="col-12">
                    <h6>Billing Information</h6>
                  </div>
                </ng-template>

                <div class="col-md">
                  <div class="form-group">
                    <input minlength="10" maxlength="10" formControlName="account_number" class="form-control"
                      type="text" placeholder="Account Number" required>
                    <div
                      *ngIf="billingForm.controls.account_number.touched && billingForm.controls.account_number.errors?.required"
                      class="text text-danger">
                      Account Number is required.
                    </div>
                    <div
                      *ngIf="billingForm.controls.account_number.touched && billingForm.controls.account_number.errors?.pattern"
                      class="text text-danger">
                      Account Number can only be numeric.
                    </div>
                    <div
                      *ngIf="billingForm.controls.account_number.touched && (billingForm.get('account_number').hasError('minlength') || billingForm.get('account_number').hasError('maxlength'))"
                      class="text text-danger">
                      Account Number can only be 10 digits.
                    </div>
                  </div>
                </div>
                <div class="col-md">
                  <div class="form-group">
                    <select formControlName="bank_code" class="form-control digits" placeholder="Bank name">
                      <option value=null>Please Select a Bank</option>
                      <option *ngFor="let bank of bankList" [value]="bank.code">
                        {{bank.name}}
                      </option>
                    </select>
                    <div
                      *ngIf="billingForm.controls.bank_code.touched && billingForm.controls.bank_code.errors?.required"
                      class="text text-danger">
                      Bank is required.
                    </div>
                  </div>
                </div>
                <div class="col-md-12">
                  <button mat-button matStepperPrevious>Back</button>
                  <button (click)="validateForm(billingForm)" mat-button matStepperNext>Next</button>
                </div>
              </form>
            </mat-step>
            <mat-step [stepControl]="othersForm" errorMessage="Configuartion info is required." state="others">
              <form [formGroup]="othersForm" class="mt-3 row theme-form mega-form">
                <ng-template matStepLabel>
                  <div class="col-12">
                    <h6>Other Information</h6>
                  </div>
                </ng-template>

                <div class="col-auto">
                  <div class="mb-0 form-group">
                    <div class="mb-0 ml-1 form-group m-checkbox-inline">
                      <div class="checkbox checkbox-primary">
                        <input formControlName="is_market_space" id="is_market_space" type="checkbox">
                        <label class="mb-0" for="is_market_space">Onboard to market place</label>
                        <div
                          *ngIf="othersForm.controls.is_market_space.touched && othersForm.controls.is_market_space.errors?.required"
                          class="text text-danger">
                          This is required.
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-auto">
                  <div class="mb-0 form-group">
                    <div class="mb-0 ml-1 form-group m-checkbox-inline">
                      <div class="checkbox checkbox-primary">
                        <input formControlName="is_company" id="is_company" type="checkbox">
                        <label class="mb-0" for="is_company">Onboard to company</label>
                        <div
                          *ngIf="othersForm.controls.is_company.touched && othersForm.controls.is_company.errors?.required"
                          class="text text-danger">
                          This is required.
                        </div>
                      </div>
                    </div>
                  </div>
                </div>


                <div class="col-md-12 mt-4">
                  <button mat-button matStepperPrevious>Back</button>
                  <button [disabled]="isLoading == true" class="btn btn-primary" (click)="onSave(stepper)" mat-button
                    matStepperNext>
                    <i *ngIf="isLoading" class="fa fa-spin fa-spinner"></i>
                    Next
                  </button>
                </div>
              </form>
            </mat-step>
            <mat-step [stepControl]="passwordForm" errorMessage="Setup your security." state="password">
              <ng-template matStepLabel>
                <div class="col-12">
                  <h6>Security</h6>
                </div>
              </ng-template>
              <p>Almost Done, Set a password for user</p>
              <form [formGroup]="passwordForm" class="row theme-form mega-form">
                <!-- password -->
                <div class="col-md">
                  <div class="form-group">
                    <label class="col-form-label">Password</label>
                    <div class="row">
                      <input formControlName="password" class="form-control col" [type]="hide ? 'password' : 'text'"
                        placeholder="Password">
                      <div class="col-auto">
                        <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'"
                          [attr.aria-pressed]="hide">
                          <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
                        </button>
                      </div>
                    </div>
                    <div
                      *ngIf="passwordForm.controls.password.touched && passwordForm.controls.password.errors?.required"
                      class="text text-danger">
                      Password is required.
                    </div>
                    <div
                      *ngIf="passwordForm.controls.password.touched && passwordForm.controls.password.errors?.pattern"
                      class="text text-danger">
                      Password must be an alphanumeric.
                    </div>
                    <div
                      *ngIf="passwordForm.controls.password.touched && passwordForm.controls.password.errors?.minLength"
                      class="text text-danger">
                      Password must be atleast 8 characters long.
                    </div>
                  </div>
                </div>

                <!-- confirm password -->
                <div class="col-md ">
                  <div class="form-group ">
                    <label class="col-form-label">Confirm Password</label>
                    <div class="row">
                      <input formControlName="confirmPassword" class="form-control col"
                        [type]="hide ? 'password' : 'text'" placeholder="Retype Password">
                      <div class="col-auto">
                        <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'"
                          [attr.aria-pressed]="hide">
                          <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
                        </button>
                      </div>
                    </div>
                    <div
                      *ngIf="passwordForm.hasError('passwordMatch') && passwordForm.get('password').touched && passwordForm.get('confirmPassword').touched"
                      class="text text-danger">
                      Password mismatch.
                    </div>
                  </div>
                </div>
                <div class="col-12">
                  <button mat-button matStepperPrevious>Back</button>
                  <button mat-button (click)="onSave(stepper);">Next</button>
                </div>
              </form>
              <!-- <div>
                <button mat-button (click)="stepper.reset()">Reset</button>
              </div> -->
            </mat-step>

            <!-- Icon overrides. -->
            <ng-template matStepperIcon="contact">
              <mat-icon>contacts</mat-icon>
            </ng-template>
            <ng-template matStepperIcon="company">
              <mat-icon>room_service</mat-icon>
            </ng-template>
            <ng-template matStepperIcon="billing">
              <mat-icon>payments</mat-icon>
            </ng-template>
            <ng-template matStepperIcon="others">
              <mat-icon>settings_input_composite</mat-icon>
            </ng-template>
          </mat-vertical-stepper>
        </div>
        <!-- <div class="card-footer">
          <button (click)="onSave(stepper)" class="mr-1 btn btn-primary">Submit</button>
          <button (click)="stepper.reset()" mat-button class="btn">Cancel</button>
        </div> -->
      </div>
    </div>
  </div>
</div>
